!function(){"use strict";var e,t=window.wp.element;const{registerPlugin:r}=wp.plugins,{PluginDocumentSettingPanel:a}=wp.editPost,{__:__}=wp.i18n,{useSelect:n,useDispatch:o}=wp.data,{TextControl:i,ComboboxControl:l}=wp.components,{useState:m}=wp.element,{union:g,map:y,isEmpty:p}=lodash,c=()=>{const{wpGbPrimarycategoryId:e,categoryTypes:r,Taxonomy:a,TaxonomyName:p}=n((e=>{var t,r;const a=null===(t=wpGbPrimaryCategory)||void 0===t?void 0:t.Taxonomy,n=null===(r=wpGbPrimaryCategory)||void 0===r?void 0:r.TaxonomyName,o=e("core").getEntityRecords("taxonomy",a,{per_page:20});return{wpGbPrimarycategoryId:String(e("core/editor").getEditedPostAttribute("meta").wp_gb_primary_category),categoryTypes:g([{name:__("Select "+n,"wp-gb-primary-category"),id:"0"}],o),Taxonomy:a,TaxonomyName:n}})),{editPost:c}=o("core/editor"),u=y(r,(e=>{let{name:t,id:r}=e;return{label:t,value:r}})),[s,d]=m(e),[w,b]=m(u);return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l,{help:__("Search "+p+" to get Suggestions","wp-gb-primary-category"),value:s,onChange:e=>(e=>{d(e),c({meta:{wp_gb_primary_category:String(e)}})})(e),options:w,onFilterValueChange:e=>(e=>{if(""===e)b(u);else{let t=wp.data.select("core").getEntityRecords("taxonomy",a,{per_page:5,search:e});if(null!=t&&0<t.length){let e=y(t,(e=>{let{name:t,id:r}=e;return{label:t,value:r}}));b(e)}}})(e)}),(r=>{if("0"===e)return __("Primary "+p+" Not Selected","wp-gb-primary-category");if("0"!==r){const e=wp.data.select("core").getEntityRecords("taxonomy",a,{include:[parseInt(r)]});return null!=e&&0<e.length?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("h4",null,(0,t.createElement)("a",{href:e[0].link},e[0].name))):__("Loading...","wp-gb-primary-category")}return __("Primary "+p+" Not Selected","wp-gb-primary-category")})(s),(0,t.createElement)(i,{type:"hidden",value:"0"===e?"0":e,onChange:e=>c({meta:{wp_gb_primary_category:String(e)}})}))},u=null===(e=wpGbPrimaryCategory)||void 0===e?void 0:e.TaxonomyName;r("plugin-wp-gb-primary-category",{render:()=>(0,t.createElement)(a,{name:"wp_gb_primary_category",title:__("Select Primary "+u,"wp-gb-primary-category"),className:"wp-gb-primary-category"},(0,t.createElement)(c,null)),icon:null})}();